<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>OnlyCheckers</title>
	<link rel="shortcut icon" type="image/img" href="https://lh3.google.com/u/0/d/1RoH675RrcwelKGD1xP764ek5UPW6PM3p=w1920-h780-iv1">
	<style type="text/css">
		body{
		background-color: #dcb;
		background-image: url(https://lh3.google.com/u/0/d/1bttv28VLupGxmdwXkv97B3usZtvrmPaF=w3000-h6489-iv1);

		}
		table{
		width: 100%;
		height: 100%;
		margin-left: 0px;
		overflow: hidden;
		border-collapse: collapse;
		}
		td{
		width: 50px;
		height: 50px;
		border: 2px solid #200;
		align-content: center;

		}
		th{
		width: 20px;
		height: 20px;
		}
		.black{
		background-color: #400;
		opacity: 0.8;

		}
		.white{
		background-color: #fcc;
		opacity: 0.8;
		}
		.blackwhenselect{
		background-color: #000;
		opacity: 1;
		border: 2px solid #ff5e00;
		}
		.whitewhenselect{
		background-color: #fff;
		opacity: 1;
		border: 2px solid #ff5e00;
		}

		.turnmobile{
		width: 100%;
		position: fixed;
		top: 0px;
		left: 0px;
		border-bottom: 3px solid #231009;
		background-color: #a24d2c; 
		font-size: 20px;
		height: 50px;
		z-index: 1000;
		padding: 5px;
		padding-left: 15px;
		}
		.turncomputer{
		width: 200px;
		position: fixed;
		top: 0px;
		left: 0px;
		border-right: 3px solid #231009;
		background-color: #a24d2c; 
		font-size: 20px;
		height: 100%;
		z-index: 1000;
		padding: 30px;
		padding-left: 5px;
		padding-right: 5px;

		}
		.icangothere{
		width: 20px;
		height: 20px;
		border-radius: 200px;
		background-color: #fff;
		border: 2px solid black;
		margin: auto;
		z-index: 500;
		position: unset;
		}
		.imgdangerous{
		border: 1px solid red;
		}
		.changethemeoffiguresclass{
		
		max-width: 90%;
		position: fixed;
		bottom: 20px;
		left: 20px;
		border: 3px solid #231009;
		border-radius: 5px;
		background-color: #c18067; 
		font-size: 20px;
		height: 25px;
		z-index: 2000;
		padding: 5px;
		
		}



		.gamemenu{
		position: fixed;
		width: 80%;
		height: 60%;
		top: 20%;
		left: 10%;
		background-color: #987;
		color: black;
		border: 3px solid black;
		padding: 10px;
		overflow: visible;
		z-index: 3000;
		transition: 0.5s ease-out;
		border-radius: 20px;
		}
		.menubutton{
		width: 80%;
		margin: auto;
		background-color: #987;
		color: black;
		border-bottom: 3px solid black;
		margin-top: 10px;
		font-size: 30px;
		padding: 5px;
		text-align: center;
		}
	</style>
	<script type="text/javascript">
		/*let massive=[["","a","b","c","d","e","f","g","h"],
		["1","1castle","1horse","1officer","1king","1queen","1officer", "1horse", "1castle"],
		["2","1pawn","1pawn","1pawn","1pawn","1pawn","1pawn","1pawn","1pawn"],
		["3","no","no","no","no","no","no","no","no"],
		["4","no","no","no","no","no","no","no","no"],
		["5","no","no","no","no","no","no","no","no"],
		["6","no","no","no","no","no","no","no","no"],
		["7","2pawn","2pawn","2pawn","2pawn","2pawn","2pawn","2pawn","2pawn"],
		["8","2castle","2horse","2officer","2king","2queen","2officer", "2horse", "2castle"],


		]*/
		const massivesave=[["","a","b","c","d","e","f","g","h"],
		["1","1checker","no","1checker","no","1checker","no", "1checker","no"],
		["2","no","1checker","no","1checker","no","1checker","no","1checker"],
		["3","1checker","no","1checker","no","1checker","no", "1checker","no"],
		["4","no","no","no","no","no","no","no","no"],
		["5","no","no","no","no","no","no","no","no"],
		["6","no","2checker","no","2checker","no","2checker","no","2checker"],
		["7","2checker","no","2checker","no","2checker","no", "2checker","no"],
		["8","no","2checker","no","2checker","no","2checker","no","2checker"],


		]

		let massive = massivesave;
		themeoffigures=0;
		function changethemeoffigures(){
			themeoffigures=(themeoffigures+1)%2;
			upgradefield();
		}



		let upgradetothis=[['<img src="https://lh3.google.com/u/0/d/1RoH675RrcwelKGD1xP764ek5UPW6PM3p=w1920-h780-iv1">','<img src="https://lh3.google.com/u/0/d/1X2jZ4vICdeCMEvu_Et98-B_IsPO6XHLc=w600-h570-p-k-nu-iv1">','<img src="https://lh3.google.com/u/0/d/1lYlkOQ6Fl3A-GMhrkoWmv0SNjsC6MUAo=w1920-h865-iv1" alt="">','<img src="https://lh3.google.com/u/0/d/1X_rzKfjKc6Pgt-AYZv5OgoYTEZviwqeB=w600-h570-p-k-nu-iv1" alt="">'],
		[]]
		function makestyle(){
			const side = (((window.screen.width > window.screen.height) ? (window.screen.height) : (window.screen.width)) * 0.8);
			style = document.createElement("style");
			style.innerHTML = `
			.chessboard{
			background-image: url(https://lh3.google.com/u/0/d/1wMhPdxiHOBdC-kJMOOx2-b7uFdIUTbeP=w3000-h6489-iv2);
			margin-top: 50px;
			background-color: #daa;
			width: ${side}px;
			height: ${side}px;
			border: 3px solid brown;
			margin-left: ${(window.screen.width - side) / 2}px;

		}
		img{
		width: ${side/9-6}px;
		height: ${side/9-6}px;
		opacity: 1;
		align: center;
		margin: auto;
		border-radius: 50px;
		}
		td{
		width: ${side/9-4}px;
		height: ${side/9-4}px;
		border: 2px solid #200;
		align-content: center;

		}
		th{
		width: ${side/9-4}px;
		height: ${(side/9-4)/2}px;
		border: 0px solid #200;
		align-content: center;


		}

			`
		document.head.append(style);

		}



		makestyle();
		function startnewgame(){
			turnnow = 1;
			peoplenow = 1;
			massive[0][0]+=1;
			massive=massivesave;
			makeboard();
			upgradefield();
			document.getElementById("gamemenu").style.top="100%";
			document.getElementById("gamemenu").style.transform="rotate(0deg)";

		}
		function endgame(){
			document.getElementById("gamemenu").style.top="20%";

		}
		function gameended(){
			let player1="no";
			let player2="no";
			for (let i = 1; i<=8; i++){
				for (let j = 1; j<=8; j++){
					if ((massive[i][j])[0]=="1"){
						player1="yes";
					} else if ((massive[i][j])[0]=="2") {
						player2="yes";
					}


				}

			}
			if (player1=="yes" && player2=="yes"){
				return "yes";
			} else {
				endgame();
				return "no";
			}
		}
		function makeboard(){
			let board="";
			for (let i = 0; i<=8; i++){
				if (i!=0){
					board=board+"<tr><th>"+i+"</th>";
				} else {
					board=board+"<tr><th>"+"</th>"
				}
				for (let j = 1; j<=8; j++){
					if (i > 0 && i<9){
						board=board+"<td id='"+i+j+"' onclick='selectfigure(id)' class='"+(( (i+j) % 2 == 0) ? ("white") : ("black")) +"'>"+massive[i][j]+"</td>"
					} else {
						board=board+"<th>"+massive[i][j]+"</th>"

					}

				}
				if (i!=0){
					board=board+"<th>"+i+"</th>";
				} else {
					board=board+"<th>"+"</th>"
				}
				board=board+"</tr>";
			}
			document.getElementById("table").innerHTML = board;
		}
		let selectcell=0;
		let selectfigurenow = "no";
		let aboutturn = 0;
		function selectfigure(id){
			if (aboutturn==0) {

				if ((massive[id[0]][id[1]])[0]==peoplenow) {
					clearfield();
					selectcell=id;
					selectfigurenow=massive[id[0]][id[1]];
					document.getElementById(id).className=document.getElementById(id).className+"whenselect";
					forallfield();
					aboutturn=1;
				} else {
					clearfield();
					selectcell=0;
				}
			} else if (selectcell!=-1 && aboutturn==1) {
				document.getElementById(selectcell).className=document.getElementById(selectcell).className.replace("whenselect", "");
				clearfield();
				upgradefield();
				if (id!=selectcell) {
					longturn(id);
					//selectcell= 0;
					//clearfield();

				} else {
				selectcell=0;
				aboutturn=0;
				}
			} else if (aboutturn==-1) {
				//document.getElementById(selectcell).className=document.getElementById(selectcell).className.replace("whenselect", "");
				clearfield();
				upgradefield();
				//if (id!=selectcell) {
				forallfield2()
				longturn2(id);

				clearfield();

				//}
			}
		}
		function longturn(id) {
			if (canigothere(id)=="yes" || canigothere(id)=="ye") {
				if (maketurn(id)=="ye") {
					massive[(id[0]/1+selectcell[0]/1)/2][(id[1]/1+selectcell[1]/1)/2]="no";
					upgradefield();
					selectcell=id;
					aboutturn=0;
					clearfield();
					for (let i = 1; i<=8; i++){
					for (let j = 1; j<=8; j++){
						selectcell=id;
						if (canigothere(i+""+j)=="ye") {
							selectcell=-1;
							aboutturn=-1;
							document.getElementById(id).className=document.getElementById(id).className+"whenselect";
							selectcell=id
							forallfield2();
						}
					}
					}
					if (aboutturn==0) {
						changeturn()
						clearfield()
					}

				} else {
					selectcell=0;
					aboutturn=0;
					clearfield();

				
				gameended();
				changeturn();
				}
			gameended();
			}
		}
		function longturn2(id) {
			if (canigothere(id)=="ye") {
				document.getElementById(selectcell).className=document.getElementById(selectcell).className.replace("whenselect", "");
				if (maketurn(id)=="ye") {
					massive[(id[0]/1+selectcell[0]/1)/2][(id[1]/1+selectcell[1]/1)/2]="no";
					upgradefield();
					id=selectcell;
					selectcell=0;
					aboutturn=0;
					clearfield();
					for (let i = 1; i<=8; i++){
					for (let j = 1; j<=8; j++){
						selectcell=id;
						if (canigothere(i+""+j)=="ye") {
							selectcell=-1;
							aboutturn=-1
							document.getElementById(selectcell).className=document.getElementById(selectcell).className.replace("whenselect", "");

							document.getElementById(id).className=document.getElementById(id).className+"whenselect";
						}
						selectcell=0;
					}
					}
					if (aboutturn==0) {
						changeturn()
						clearfield()
					}

				} else {
					selectcell=0;
					aboutturn=0;
					clearfield();

				
					gameended();
					changeturn();
				}
				gameended();
			}
		}
		function maketurn(id) {
			if (canigothere(id)=="yes") {
				massive[id[0]][id[1]]=massive[selectcell[0]][selectcell[1]];
				document.getElementById(id).innerHTML=massive[id[0]][id[1]];

				massive[selectcell[0]][selectcell[1]]="no";
				document.getElementById(selectcell).innerHTML=massive[selectcell[0]][selectcell[1]];

				upgradefield();
				gameended();
				return "yes"
			} else if (canigothere(id)=="ye") {
				massive[id[0]][id[1]]=massive[selectcell[0]][selectcell[1]];
				document.getElementById(id).innerHTML=massive[id[0]][id[1]];

				massive[selectcell[0]][selectcell[1]]="no";
				document.getElementById(selectcell).innerHTML=massive[selectcell[0]][selectcell[1]];

				upgradefield();
				gameended();
				return "ye";
			}
		}
		let turnnow = 1;
		let peoplenow = 1;
		function changeturn() {
			turnnow++;
			peoplenow = (peoplenow) % 2 + 1;
			document.getElementById("turn").innerHTML="сейчас ход номер: "+turnnow+"<br>ходит игрок номер: "+ peoplenow;
			selectcell=0;
		}
		function canigothere(id){
			if (selectfigurenow=="1king" || selectfigurenow=="2king") {
				if ((id[0]-selectcell[0]==id[1]-selectcell[1] || id[0]-selectcell[0]==-id[1]/1+selectcell[1]/1) && massive[id[0]][id[1]][0]!=selectfigurenow[0]) {
					let matter = "yes";
					if (id[0]>selectcell[0]) {
						if (id[1]>selectcell[1]){
							for (let i = selectcell[0]/1+1; i < id[0]; i++) {
								j=i/1-selectcell[0]/1+selectcell[1]/1
								if (massive[i][j]!="no") {
									matter = "no";
								}
							}	
						} else if (id[1]<selectcell[1]){
							for (let i = selectcell[0]/1+1; i < id[0]; i++) {
								j=-i+selectcell[0]/1+selectcell[1]/1
								if (massive[i][j]!="no") {
									matter = "no";
								}
							}	
						}
					} else if (id[0]<selectcell[0]) {
						if (id[1]>selectcell[1]){
							for (let i = id[0]/1+1; i < selectcell[0]; i++) {
								j=-i+id[0]/1+id[1]/1;

								if (massive[i][j]!="no") {
									matter = "no";
								}
							}	
						} else if (id[1]<selectcell[1]){
							for (let i = id[0]/1+1; i < selectcell[0]; i++) {
								j=i-id[0]/1+id[1]/1
								if (massive[i][j]!="no") {
									matter = "no";
								}
							}	
						}
					}
					return matter
				} else {
					return "no"
				}
			} else if (selectfigurenow=="1checker" || selectfigurenow=="2checker") {
				if (selectfigurenow=="1checker"){
					if (id[0]-selectcell[0]==1 && (id[1]-selectcell[1]==1 || id[1]-selectcell[1]==-1) && massive[id[0]][id[1]]=="no") {
						return "yes"
					} else if ((id[0]-selectcell[0]==2 || id[0]-selectcell[0]==-2) && (id[1]-selectcell[1]==2 || id[1]-selectcell[1]==-2) && massive[id[0]][id[1]]=="no" && (massive[(id[0]/1+selectcell[0]/1)/2][(id[1]/1+selectcell[1]/1)/2])[0]=="2") {
						return "ye"
					}
				} else if (selectfigurenow=="2checker"){
					if (id[0]-selectcell[0]==-1 && (id[1]-selectcell[1]==1 || id[1]-selectcell[1]==-1) && massive[id[0]][id[1]]=="no") {
						return "yes"
					} else if ((id[0]-selectcell[0]==-2 || id[0]-selectcell[0]==2) && (id[1]-selectcell[1]==2 || id[1]-selectcell[1]==-2) && massive[id[0]][id[1]]=="no" && (massive[(id[0]/1+selectcell[0]/1)/2][(id[1]/1+selectcell[1]/1)/2])[0]=="1") {
						return "ye"
					}
				}
			}

				
			
			

		}
		function forallfield(){
			for (let i = 1; i<=8; i++){
				for (let j = 1; j<=8; j++){
					if (canigothere(i+""+j)=="yes" || canigothere(i+""+j)=="ye") {
						if (massive[i][j]=="no"){
							document.getElementById(i+""+j).innerHTML+= "<div class='icangothere'></div>";
						} else {
							document.getElementById(i+""+j).style.border="2px solid red";
						}
					} else {
						document.getElementById(i+""+j).innerHTML=document.getElementById(i+""+j).innerHTML.replace("<div class='icangothere'></div>", "ррр");
						document.getElementById(i+""+j).style.border="";

					}
				}
			}
		}
		function forallfield2(){
			for (let i = 1; i<=8; i++){
				for (let j = 1; j<=8; j++){
					if (canigothere(i+""+j)=="ye") {
						if (massive[i][j]=="no"){
							document.getElementById(i+""+j).innerHTML+= "<div class='icangothere'></div>";
						} else {
							document.getElementById(i+""+j).style.border="2px solid red";
						}
					} else {
						document.getElementById(i+""+j).innerHTML=document.getElementById(i+""+j).innerHTML.replace("<div class='icangothere'></div>", "ррр");
						document.getElementById(i+""+j).style.border="";

					}
				}
			}
		}
		function clearfield(){
			for (let i = 1; i<=8; i++){
				for (let j = 1; j<=8; j++){
					document.getElementById(i+""+j).innerHTML=document.getElementById(i+""+j).innerHTML.replace("<div class='icangothere'></div>", "");
					document.getElementById(i+""+j).style.border="";

					
				}
			}
		}
		function upgradefield(){
			for (let i = 1; i<=8; i++){
				for (let j = 1; j<=8; j++){
					if (massive[i][j]=="no") {
						document.getElementById(i+""+j).innerHTML="";

					} else if (massive[i][j]=="1checker") {
						document.getElementById(i+""+j).innerHTML=upgradetothis[themeoffigures][0];

					} else if (massive[i][j]=="2checker") {
						document.getElementById(i+""+j).innerHTML=upgradetothis[themeoffigures][1];

					} else if (massive[i][j]=="1king") {
						document.getElementById(i+""+j).innerHTML=upgradetothis[themeoffigures][2];

					} else if (massive[i][j]=="2king") {
						document.getElementById(i+""+j).innerHTML=upgradetothis[themeoffigures][3];


					}
				}
			}

		}
	</script>
</head>
<body>
	<div class="turn" id="turn"></div>
	<div class="gamemenu" id="gamemenu">
		<div class="menubutton" id="start" onclick="startnewgame()">start new game</div>
		<div class="menubutton" id="start" onclick="alert('no')">statistics</div>
		<div class="menubutton" id="start" onclick='document.location.href = "https://superguestgg.github.io"'>exit</div>
	</div>

	<div id="changethemeoffiguresid" onclick="changethemeoffigures()" class="changethemeoffiguresclass">поменять фигуры</div>
	<div class="chessboard" id="chessboard">
		<table id="table">
			<tr><th>a</th><th>b</th><th>c</th><th>d</th><th>e</th><th>f</th><th>g </th><th>h </th></tr>
			<tr></tr>



		</table>



	</div>
	<script type="text/javascript">
		makeboard();
		document.getElementById("turn").innerHTML="сейчас ход номер: "+turnnow+"<br>ходит игрок номер: "+ peoplenow;
		upgradefield();
		if (window.screen.width < window.screen.height) {
			document.getElementById("turn").className="turnmobile";
			document.getElementById("chessboard").style="margin-top: 30%";

		} else {
			document.getElementById("turn").className="turncomputer";

		}
	</script>
</body>
</html>